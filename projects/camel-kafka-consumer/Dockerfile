FROM openjdk:11.0-jre-slim-buster

ARG DEPENDENCY=build/libs/dependency
ARG JAR_FILE=build/libs/camel-kafka-consumer-*.jar
ARG KAFKA_BROKERS_ARG
ARG KAFKA_CONSUMER_GROUP_ARG
ARG KAFKA_TOPIC_ARG

ARG CHECK_INTERVAL_MS_ARG
ARG MAXIMUM_IDLE_TIME_MS_ARG

ENV KAFKA_BROKERS ${KAFKA_BROKERS_ARG}
ENV KAFKA_CONSUMER_GROUP ${KAFKA_CONSUMER_GROUP_ARG}
ENV KAFKA_TOPIC ${KAFKA_TOPIC_ARG}

ENV CHECK_INTERVAL_MS ${CHECK_INTERVAL_MS_ARG}
ENV MAXIMUM_IDLE_TIME_MS ${MAXIMUM_IDLE_TIME_MS_ARG}

WORKDIR /app

COPY ${DEPENDENCY}/BOOT-INF/lib/*.jar /app/
COPY ${JAR_FILE} /app/camel-kafka-consumer.jar
ENTRYPOINT ["java", "-jar", "/app/camel-kafka-consumer.jar"]
